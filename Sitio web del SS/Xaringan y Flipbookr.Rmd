---
title: "Xaringan y Flipbookr"
author: "Carlos A. Ar."
date: "칔ltima edici칩n `r format(Sys.Date(), '%d de %B del %Y')`"
---

<div style="text-align: justify">

<div/>

```{r, include = FALSE}
library(xaringan)
```

**Objetivo:** crear una presentaci칩n en RStudio con c칩digo a trav칠s del paquete `xaringan`, definir y crear un flipbook.

# 쯈u칠 es Xaringan?

El nombre viene de un anim칠 pero aqu칤 nos referimos al paquete de R que permite realizar presentaciones con sint치xis de RMarkdown. Las ventajas son heredadas por RMarkdown, es decir, que existe la posibilidad de ver c칩digo, hacer div칠rsos an치lisis automatizados y no hacer siempre copy-paste de los gr치ficos que se elaboran en RStudio.

## Crear una presentaci칩n en Xaringan

1.  Instalar la librar칤a xaringan `install.package("xaringan")` y cargar la librer칤a `library(xaringan)`.

2.  Crear un proyecto de R para que las im치genes y dem치s archivos se queden en la carpeta que se crea en autom치tico en la creaci칩n del proyecto.

3.  Dentro del proyecto crear un archivo de RMarkdown y cambiar el encabezado YAML:

<div>

<p style="text-align:center;">

![](xaringan_yaml.png){width="450px"}

</p>

</div>

La diferencia con este encabezado y el de un Rmd es el output, mientras que en Rmd el `output` es `html_document` o `pdf_document`, para compartir una presentaci칩n de xaringan es necesario usar `xaringan::moon_reader` lo que implica una forma particular de presentaci칩n.

Notemos que existen algunas especificaciones extra como el estilo de la presentaci칩n que se pones en el par치metro `css`. 치ra poder identificar los diferentes estilos posibles en las presentaciones de sharingan usamos el siguiente comando:

```{r}
names(xaringan:::list_css())
```

En general el par치metro `css` describe las caracter칤sticas de personalizaci칩n de la presentaci칩.

Por otro lado

      `nature:`
          `higlightStyle: github`
          `highlighLine: true`
          `countIncrementalSlides: true`

hace referencia a la forma en que queremos que aparezcan las l칤neas de c칩digo dentro de la presentaci칩n. Por ejemplo, `highlighLine: true` implica que se har치 un subrayado para los c칩digos que aparezcan en la presentaci칩n. Mientras que `countIncrementalSlides: true` permitir치 que las diapositivas se enumeren.

4.  Cargar las librer칤as a ocupar en un chunk de R.

5.  Escribir tres guiones medios **---** cada que se requiera una nueva diapositiva. Al inicio de cada diapositiva debe existir un t칤tulo el cual se pone como la [sint치xis de Rmd](https://dreamy-beaver-cd6aad.netlify.app/r-markdown#Editar_texto).

**NOTA:** si deseas ver las modifiaciones que haces de tu presentaci칩n en el momento de que haces los cambios en el c칩digo utiliza en consola el comando: `xaringan::inf_mr()`

## Personalizar la presentaci칩n

-   En cada diapositica es posible hacer que esta tenga im치genes, lo cual se logra con sint치xis de Rmd o de HTML. Aqu칤 pongo el ejemplo de HTML.

        <div>
        <p style = 'text-align:center;'>
        ![](xaringan_yaml.png){width='250px'}
        </p>
        </div>

En este caso la imagen se llama xaringan_yaml y tiene extensi칩n png. Esta imagen debe ser previamente guardada en la carpeta del RProject donde se est치 trabajando, de esta manera no ser치 necesario escribir el `path` del directorio.

-   Si se desea dividir una diapositiva en dos columnas se usa la sint치xis siguiente:

        .pull-left[
        Hola, este es el lado izquierdo
        ]

        .pull-right[
        Hola, este es el lado derechairo
        ]

Donde el contenido de la izquierda ir치 entre los corchetes as칤 como el de la derecha.

-   Para hacer referencias a p치ginas o insertar c칩digo con sus m칰ltiples opciones de aparici칩n en la presentaci칩n, basta con usar la [sint치xis de Rmd](https://dreamy-beaver-cd6aad.netlify.app/r-markdown).

Para m치s informaci칩n sobre la personalizaci칩n de Xaringan consulta [Xaringan Presentations](https://bookdown.org/yihui/rmarkdown/xaringan.html)

# Flipbookr

### 쯈u칠 es un *Flipbook*?

Los flipbooks presentan el c칩digo paso a paso y en paralelo con la salida. Es una forma de ver resultados de manera incremental.

**Ejemplo**

<div>

<p style="text-align:center;">

![](https://raw.githubusercontent.com/simplystats/simplystats.github.io/master/_images/life-expectancy-versus-fertility-rate.gif){width="450px"}

</p>

</div>

En general un flipbook permite tener la visualizaci칩n de manera secuencial o progresiva lo cual permite tener un mejor entendimiento de lo que sucede paso a paso.

En particular, se puede hacer una presentaci칩n con Xaringan que contengan a su vez los flipbooks. [Evangeline Reynols](https://evangelinereynolds.netlify.app/post/introducing-flipbookr/) describe que *La idea de los flipbooks es ofrecer a los "lectores" conocimientos sobre el comportamiento de funciones espec칤ficas en el contexto de un proyecto m치s amplio. El "lector" puede aislar funciones desconocidas y alternar entre estados de salida antes y despu칠s de que se use una funci칩n, viendo c칩mo esa funci칩n afecta el resultado.*

## Ventajas del uso de flipbooks

1.  Permite digerir el proceso de manipulaci칩n de datos y construcci칩n de gr치ficos. 춰Como en forma de pel칤cula!
2.  Se puede obtener informaci칩n de tramos cortos para generar an치lisis similares pero con otra informaci칩n.
3.  Observar cambios del c칩digo a trav칠s del movimiento en vez de la lectura exaustiva de c칩digo.

## Utilidad de flipbooks.

Algunas formas en las que se practica la creaci칩n de flipbooks son:

-   Negociaci칩n de datos.
-   Visualizaci칩n de datos con ggplot2.
-   An치lisis Estad칤stico.

# Xaringan y Flipbookr

Para poder crear un Flipbook en R que se reproduzca en Xaringan:

1.  Instalar la plataforma de presentaci칩n de diapositivas Xaringan install.packages("xaringan")
2.  Instalar flipbookr - `remotes::install_github("EvaMaeRey/flipbookr")`
3.  Reiniciar R.
4.  Crea un Rmd y elige la opci칩n `From Template -> A Minimal Flipbook`

<div>

<p style="text-align:center;">

![](flipbookr.png){width="450px"}

</p>

</div>

5.  Use esta plantilla para comenzar o reempl치cela con sus propias requerimientos.

Dentro del documento podremos notar un encabezado igual al de una presentaci칩n de Xaringan por lo cual s칤 se puede adaptar al dise침o o estilo que requieras.

Por otro lado una de las cosas interesantes en el documento es la funci칩n `chunk_reveal` que permite obtener la forma de flipbook a partir de un chunk de c칩digo. Es decir que esta funci칩n toma el c칩digo de un fragmento de c칩digo referenciado y devuelve una secuencia de c칩digo parcial a una serie de fragmentos de c칩digo separados por saltos de diapositiva. Al compilar, obtendr치 un recorrido del c칩digo paso a paso.

## Par치metros de `chunk_reveal()`:

-   `chunk_name`: una cadena de caracteres que hace referencia al nombre del fragmento del chunk de c칩digo.

    ![](ejemplo_flipbook1.png){width="9.5cm" height="1.5cm"}

-   `break_type`: permite dar opciones de vizualizaci칩n del flipbook, es decir que indica qu칠 linea del c칩digo del chunk se revelar치 y en qu칠 momento. Las posibles entradas son:

    -   "auto": por defecto, el par치metro toma esta opci칩n. La forma en que aparecer치 el c칩digo del flipbook depender치 de los par칠ntesis o pipes (%\>%) que aparezcan en ese orden.

    -   "user": aqu칤 puedes decidir qu칠 parte del c칩digo aparecer치 en qu칠 momento. La forma en que la funci칩n detecta cu치ndo quieres que se detenga (en leer el c칩digo) ser치 con un **\#BREAK** que le pongas dentro del chunk de c칩digo.

        ![](ejemplo_flipbook4.png)

    -   "non_seq": an치logo a la opci칩n "user" solo que esta vez se ejecutar치 todo el c칩digo **excepto** aquel que tenga \#BREAK2, \#BREAK3, ..., las lineas de c칩digo que tengan esas caracter칤sticas, se mostrar치n (as칤 como sus resultados) en el orden de su n칰mero asociado, es decir, primero se ejecutar치 \#BREAK2, luego BREAK3, ...

        ![](ejemplo_flipbook5.png)

    -   "rotate": permite que se cambien las opciones de alguna parte del c칩digo (por ejemplo el color de una gr치fica).

        ![](ejemplo_flipbook6.png)

    -   "n": la n es sustituida por un n칰mero natural (1, 2, 3, ...) el cual indica las veces que se desea ejecutar ese chunk de c칩digo. Se usa cuando se tienen muestras "aleatorias" que cambian en cada ejecuci칩n para mostrar los posibles resultados distintos.

    -   "replace": En vez de dar otros colores como *posibilidades (como en rotate),* esta opci칩n permite remplazar alguna parte del c칩digo (y a la vez, claro, cambiar los resultados que dependen de esa parte del c칩digo).

-   `display_style`: es el par치metro que permite distinguir qu칠 se desea ver en el flipbook creado. Las opciones de este par치metro son:

    -   "output": se ve solo el resultado en el flipbook

    -   "code": se ve solo el c칩digo en el flipbook

    -   "output_lag": se ve el resultado del c칩digo pero con UN RETRASO

    -   "output_target": se ve solo el resultado final del c칩digo en el flipbook

    -   "output_start": se ve solo lo primero del c칩digo

    -   "md": se puede usar para mostrar caracteres

        Es evidente que de manera aislada, no siempre servir치 ver el c칩digo, el resultado, letras, etc. Por lo cual este par치metro puede tener una entrada como vector que combine hasta tres opciones de las anteriores.

        Por ejemplo: `display_style = "c("output_lag", "code", "output")"` permitir치 que se vea en el flipbook: el resultado del c칩digo con el atraso de una linea, el c칩digo y adem치s el resultado que le corresponde.

        Jugar con las combinaciones de este vector es lo recomendado para que veas la forma en que se obtienen los resultados de tu flipbook. 游뱕

-   `left_assign`: un valor l칩gico. El valor predeterminado es FALSE, si es VERDADERO entonces el objeto asignado al c칩digo aparecer치 al final del chunk de c칩digo durante todo el flipbook.

-   `title`: una cadena de caracteres que puede contener un t칤tulo para los marcos del flipbook; esto puede incluir informaci칩n de encabezado "\#\# Mi t칤tulo".

-   `widths`: un vector num칠rico que contiene anchos relativos para los paneles. Este par치metro se relaciona 칤ntimamente con `display_style` ya que dependiendo del n칰mero de columans que aparezcan en el flipbook, es el n칰mero de entradas que tendr치 este vector.

    Por ejemplo: Si `display_style = "c("output_lag", "code", "output")"`, entonces `widths = c(20, 30, 10)` donde 20 ser치 el ancho para el "output_lag"; 30 ser치 el ancho para "code" (para que se vea el c칩digo) y 10 ser치 el ancho destinado al resultado. En general es arbitraria la forma en que se destina el ancho a cada panel.

El valor que regresa la funci칩n solo se puede ver implementado en el "tejimiento" de la presnetaci칩n o despu칠s de hacer el "knit".

La funci칩n puede vere as칤:

    chunk_reveal(
    chunk_name = "pinguinos",
    break_type = "non_sequence", 
    display_type = c("code", "output", "output_target"),
    title =  "### Deseamos un flipbook con nuestra secuencia propia que adem치s nos diga a d칩nde vamos a llegar",
    widths = c(20, 20, 10),
    font_size_code = "110%"
    )

6.  Compile su documento - "Knit" en RStudio

Para poder ver en acci칩n los diferentes par치metros de la funci칩n que hace flipbooks, adem치s de otras cosas extra, te invito a ver en esta p치gina: Ejemplos -\> Flipbookr

Conoce m치s en la p치gina de Eva sobre [flipbookr](https://evamaerey.github.io/flipbooks/about)
